var is_login=!1;$.get("/ajax/login-state",function(e){is_login=e.is_login,$("#user-slot").html(e.html)});var movie={id:$(".detail_page-watch").attr("data-id"),type:$(".detail_page-watch").attr("data-type")},is_process=!1;function check_login(){return!!is_login||($("#modallogin").modal("show"),!1)}function redirect(e){e.redirect&&(location.href=e.redirect)}function vote_info(){$.get("/ajax/vote_info/"+movie.id,function(e){$(".block-rating").html(e)})}function vote_submit(t,s){$("#vote-loading").show(),"undefined"!=typeof recaptcha_site_key?grecaptcha.execute(recaptcha_site_key,{action:"vote_movie"}).then(function(e){$.post("/ajax/vote/"+t,{state:s,token:e},function(e){$(".block-rating").html(e)})}):$.post("/ajax/vote/"+t,{state:s},function(e){$(".block-rating").html(e)})}function like(e){check_login()&&vote_submit(e,1)}function dislike(e){check_login()&&vote_submit(e,0)}function get_episodes(){2==movie.type?$.get("/ajax/tv/seasons/"+movie.id,function(e){$("#content-episodes").html(e)}):$(".detail_page").hasClass("watch_page")&&$.get("/ajax/movie/episodes/"+movie.id,function(e){$("#content-episodes").html(e)})}function check_favorite(){$.get("/ajax/check_favorite/"+movie.id,function(e){$("#favorite-state").html(e)})}function submit_add_favorite(e){is_process=!0,$.post("/ajax/favorite",{movie_id:movie.id,token:e},function(e){redirect(e),is_process=!1,$("#favorite-state").html(e.html),$("#fav-message").html(e.message),$("#alert-fav").show(),setTimeout(function(){$("#alert-fav").hide()},3e3)})}function add_favorite(){is_process||check_login()&&("undefined"!=typeof recaptcha_site_key?grecaptcha.execute(recaptcha_site_key,{action:"add_favorite"}).then(function(e){submit_add_favorite(e)}):submit_add_favorite(""))}function remove_favorite(e){is_process||check_login()&&confirm("Are you sure remove this movie from favorite?")&&(is_process=!0,$.post("/ajax/remove_favorite",{id:e},function(e){is_process=!1,redirect(e),location.reload()}))}function watch(e){var t=e.target,s=$(t).attr("href"),o=$(t).attr("data-linkid");$(".detail_page").hasClass("watch_page")&&(e.preventDefault(),$(".link-item").removeClass("active"),history.pushState({},"",s),get_source(o))}$(document).ready(function(){function e(e){$(e.target).prev(".toggle-submenu").find(".more-less").toggleClass("fa-plus-square fa-minus-square")}$("#mobile_menu").click(function(e){$("#sidebar_menu, #mobile_menu").toggleClass("active"),$("#sidebar_menu_bg").addClass("active"),$("#search-toggle, #search, #header").removeClass("active"),$("body").toggleClass("body-hidden")}),$(".toggle-sidebar, #sidebar_menu_bg").click(function(e){$("#sidebar_menu, #mobile_menu, #sidebar_menu_bg, #search-toggle, #search, #header").removeClass("active"),$("body").removeClass("body-hidden")}),$("#search-toggle").click(function(e){$("#search, #search-toggle, #sidebar_menu_bg, #header").toggleClass("active"),$("body").toggleClass("body-hidden")}),$("#text-home-expand").click(function(e){$(".text-home").toggleClass("thm-expand")}),$("#sidebar_subs_genre, #sidebar_subs_country").on("hidden.bs.collapse",e),$("#sidebar_subs_genre, #sidebar_subs_country").on("shown.bs.collapse",e),$(".header_menu-list> .nav-item").bind("mouseover",function(){$(this).find(".header_menu-sub").css("display","block")}),$(".header_menu-list> .nav-item").bind("mouseout",function(){$(this).find(".header_menu-sub").css("display","none")}),$("#turn-off-light").click(function(e){$("#mask-overlay, #turn-off-light, .watching_player-area").toggleClass("active")}),$("#mask-overlay").click(function(e){$("#mask-overlay, #turn-off-light, .watching_player-area").removeClass("active")});var t=!0;$(".search-suggest").mouseover(function(){t=!1}),$(".search-suggest").mouseout(function(){t=!0});var s=null;$("input[name=keyword]").keyup(function(){null!=s&&clearTimeout(s),s=setTimeout(function(){s=null;var e=$("input[name=keyword]").val().trim();2<e.length?$.post("/ajax/search",{keyword:e},function(e){$(".search-suggest").html(e),$(".search-suggest").show()}):$(".search-suggest").hide()},600)}),$("input[name=keyword]").blur(function(){t&&$(".search-suggest").hide()}),$("input[name=keyword]").focus(function(){""!==$(".search-suggest").html()&&$(".search-suggest").show()}),$(".goto-seasons").click(function(){$("html, body").animate({scrollTop:$("#content-episodes").offset().top-30},1e3)}),$(".goto-comments").click(function(){$("html, body").animate({scrollTop:$("#film_comments").offset().top-30},1e3)}),$(".btn-filter").click(function(){var e=[],t=[];$(".genre-ids:checked").each(function(){e.push($(this).val())}),$(".country-ids:checked").each(function(){t.push($(this).val())}),e=0<e.length?e.join("-"):"all",t=0<t.length?t.join("-"):"all";var s=$("input[name=release_year]:checked").val(),o=$("input[name=quality]:checked").val(),i=$("input[name=type]:checked").val();window.location.href="/filter?type="+i+"&quality="+o+"&release_year="+s+"&genre="+e+"&country="+t})});var app=new Vue({el:"#app",data:{name:"",email:"",password:"",confirm_password:"",new_password:"",remember:!1,error_login:!1,error_register:!1,error_forgot:!1,error_profile:!1,error_message:"",keyword:"",is_process:!1},methods:{show_login:function(){this.error_login=!1,$(".auth-tab").removeClass("active show"),$("#modal-tab-login").addClass("active show")},show_register:function(){this.error_register=!1,$(".auth-tab").removeClass("active show"),$("#modal-tab-register").addClass("active show")},show_forgot:function(){this.error_forgot=!1,$(".auth-tab").removeClass("active show"),$("#modal-tab-forgot").addClass("active show")},login:function(e){var t=this;t.email&&t.password&&(this.is_process||($("#login-loading").show(),this.is_process=!0,$.post("/ajax/login",{email:this.email,password:this.password,remember:this.remember},function(e){e.status?(is_login=e.is_login,$("#user-slot").html(e.html),$("#modallogin").modal("hide")):(t.error_login=!0,t.error_message=e.message),t.is_process=!1,$("#login-loading").hide()}))),e.preventDefault()},forgot_password:function(e){e.preventDefault()},register:function(e){var t=this;this.password!==this.confirm_password?(this.error_register=!0,this.error_message="Confirm password is invalid"):this.is_process||($("#register-loading").show(),this.is_process=!0,"undefined"!=typeof recaptcha_site_key?grecaptcha.execute(recaptcha_site_key,{action:"register"}).then(function(e){t.submit_register(e)}):t.submit_register("")),e.preventDefault()},submit_register:function(e){var t=this;$.post("/ajax/register",{email:this.email,password:this.password,name:this.name,token:e},function(e){e.status?(is_login=e.is_login,$("#user-slot").html(e.html),$("#modallogin").modal("hide")):(t.error_register=!0,t.error_message=e.message),t.is_process=!1,$("#register-loading").hide()})},update_profile:function(e){var t=this;this.is_process||($("#update-profile-loading").show(),this.is_process=!0,$.post("/ajax/update_profile",{name:$("#pro5-name").val(),password:this.password,new_password:this.new_password},function(e){e.status?location.reload():(t.error_profile=!0,t.error_message=e.message),t.is_process=!1})),e.preventDefault()},search:function(e){if(""!==this.keyword){var t=this.keyword.replace(/\W-/g,"").replace(/['"]+/g,"").split(" ").join("-").toLowerCase();location.href="/search/"+t}e.preventDefault()}}});